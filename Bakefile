dotfiles=${dotfiles:-dot/*}

desc install "Install all sources to ${HOME}."
task install {
  local prefix=""
  for origin in ${dotfiles}; do
    prefix=${HOME}/.${origin#*/}
    if test -d ${origin}; then
      run mkdir -p ${prefix}
      dotfiles=${origin}/*
      invoke install
    else
      run cp -rv ${origin} ${prefix}
      echo ${prefix} >> ${HOME}/.dotfiles-uninstall
    fi
  done
}

desc uninstall "Uninstall all sources from ${HOME}."
task uninstall {
  local files=$(readfile ${HOME}/.dotfiles-uninstall)

  for origin in ${files}; do
    run rm ${origin}
  done
  rm ~/.dotfiles-uninstall
}

# vim: filetype=sh
